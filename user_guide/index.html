<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Krzysztof Jusiak">
  
  <title>User Guide - boost.msm-lite</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/codemirror.css">
  <link rel="stylesheet" href="../css/highlight.css">
  <link rel="stylesheet" href="../css/mdn-like.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "User Guide";
    var mkdocs_page_input_path = "user_guide.md";
    var mkdocs_page_url = "/user_guide/index.html";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script>

  <script src="../js/codemirror/codemirror.js"></script>
  <script src="../js/codemirror/clike.js"></script>
  <script src="../js/codemirror/active-line.js"></script>

  <script src="../js/cpp.js"></script>
  <script src="../js/gitter.js"></script>
  <script src="../js/html.js"></script>
  <script src="../js/youtube.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

	
	<nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">

      <a href="http://boost.org"><img src="../img/boost.png" /></a>
      <a href="../index.html" class="icon icon-home" style="font-weight:bold;text-align:left;padding:0.809em;color:#fcfcfc;margin-bottom:0.809em"> boost.msm-lite</a>

      <div class="wy-side-nav-search">
		<div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">

        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../index.html">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../overview/index.html">Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../tutorial/index.html">Tutorial</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="index.html">User Guide</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#transitional-concept">transitional [concept]</a></li>
                
            
                <li class="toctree-l3"><a href="#configurable-concept">configurable [concept]</a></li>
                
            
                <li class="toctree-l3"><a href="#callable-concept">callable [concept]</a></li>
                
            
                <li class="toctree-l3"><a href="#dispatchable-concept">dispatchable [concept]</a></li>
                
            
                <li class="toctree-l3"><a href="#state-core">state [core]</a></li>
                
            
                <li class="toctree-l3"><a href="#event-core">event [core]</a></li>
                
            
                <li class="toctree-l3"><a href="#make_transition_table-state-machine">make_transition_table [state machine]</a></li>
                
            
                <li class="toctree-l3"><a href="#sm-state-machine">sm [state machine]</a></li>
                
            
                <li class="toctree-l3"><a href="#testingsm-testing">testing::sm [testing]</a></li>
                
            
                <li class="toctree-l3"><a href="#make_dispatch_table-extension">make_dispatch_table [extension]</a></li>
                
            
                <li class="toctree-l3"><a href="#boost_msm_log-debugging">BOOST_MSM_LOG [debugging]</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../examples/index.html">Examples</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../CHANGELOG/index.html">CHANGELOG</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../TODO/index.html">TODO</a>
        
    </li>
<li>
          
        </ul>
      </div>

    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">boost.msm-lite</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      
    
    <li>User Guide</li>
    <li class="wy-breadcrumbs-aside">
      
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h3 id="transitional-concept">transitional [concept]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Requirements for transition.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template &lt;class T&gt;
concept bool transitional() {
  return requires(T transition) {
    typename T::src_state;
    typename T::dst_state;
    typename T::event;
    typename T::deps;
    T::has_initial;
    { transition.execute() } -&gt; bool;
  }
}
</code></pre>
<p><strong><em>Semantics</em></strong></p>
<pre><code>transitional&lt;T&gt;
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>using namespace msm;
auto transition = ("idle"_s == terminate);
static_assert(transitional&lt;decltype(transition)&gt;);
</code></pre>
<h3 id="configurable-concept">configurable [concept]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Requirements for the state machine.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template &lt;class SM&gt;
concept bool configurable() {
  return requires(SM sm) {
    { sm.configure() };
  }
}
</code></pre>
<p><strong><em>Semantics</em></strong></p>
<pre><code>configurable&lt;SM&gt;
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>class example {
  auto configure() const noexcept {
    return make_transition_table();
  }
};

static_assert(configurable&lt;example&gt;);
</code></pre>
<h3 id="callable-concept">callable [concept]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Requirements for action and guards.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template &lt;class TResult, class T&gt;
concept bool callable() {
  return requires(T object) {
    { object(...) } -&gt; TResult;
  }
}
</code></pre>
<p><strong><em>Semantics</em></strong></p>
<pre><code>callable&lt;SM&gt;
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>auto guard = [] { return true; };
auto action = [] { };

static_assert(callable&lt;bool, decltype(guard)&gt;);
static_assert(callable&lt;void, decltype(action)&gt;);
</code></pre>
<h3 id="dispatchable-concept">dispatchable [concept]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Requirements for the dispatch table.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template &lt;class TDynamicEvent, TEvent&gt;
concept bool dispatchable() {
  return requires(T) {
    typename TEvent::id;
    { TEvent(declval&lt;TDynamicEvent&gt;()) };
  }
}
</code></pre>
<p><strong><em>Semantics</em></strong></p>
<pre><code>dispatchable&lt;SM&gt;
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>struct runtime_event { };

struct event {
  static constexpr auto id = 42;
  event(runtime_event) {}
};

static_assert(dispatchable&lt;runtime_event, event&gt;);
</code></pre>
<h3 id="state-core">state [core]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Represents a state machine state.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template&lt;class TState&gt; // no requirements, TState may be a state machine
class state {
public:
  template &lt;class T&gt; // no requirements
  auto operator==(const T &amp;) const noexcept;

  template &lt;class T&gt; // no requirements
  auto operator+(const T &amp;) const noexcept;

  template &lt;class T&gt; requires callable&lt;bool, T&gt;
  auto operator[](const T) const noexcept;

  template &lt;class T&gt; requires callable&lt;void, T&gt;
  auto operator/(const T &amp;t) const noexcept;

  const char* c_str() noexcept;
};

template &lt;class T, T... Chrs&gt;
state&lt;unspecified&gt; operator""_s() noexcept;

// predefined states
state&lt;unspecified&gt; terminate;
state&lt;unspecified&gt; initial;
</code></pre>
<p><strong><em>Semantics</em></strong></p>
<pre><code>state&lt;T&gt;{}
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>state&lt;class idle&gt; idle;
auto idle = state&lt;class idle&gt;{};
auto idle = "idle"_s;

auto initial_state = idle(initial);

auto last_state = terminate;
</code></pre>
<h3 id="event-core">event [core]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Represents a state machine event.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template&lt;TEvent&gt; // no requirements
class event {
public:
  template &lt;class T&gt; requires callable&lt;bool, T&gt;
  auto operator[](const T &amp;) const noexcept;

  template &lt;class T&gt; requires callable&lt;void, T&gt;
  auto operator/(const T &amp;t) const noexcept;
};

template&lt;class TEvent&gt;
event&lt;TEvent&gt; event{};

// predefined events
auto on_entry = event&lt;unspecified&gt;;
auto on_exit = event&lt;unspecified&gt;;
</code></pre>
<p><strong><em>Semantics</em></strong></p>
<pre><code>event&lt;T&gt;
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>auto my_int_event = event&lt;int&gt;;
</code></pre>
<h3 id="make_transition_table-state-machine">make_transition_table [state machine]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Creates a transition table.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template &lt;class... Ts&gt; requires transitional&lt;Ts&gt;...
auto make_transition_table(Ts...) noexcept;
</code></pre>
<p><strong><em>Semantics</em></strong></p>
<pre><code>make_transition_table(transitions...);
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>auto transition_table = make_transition_table(
  "idle_s"(initial) == terminate + event&lt;int&gt; / [] {}
);

class example {
public:
  auto configure() const noexcept {
    return make_transition_table();
  }
};
</code></pre>
<h3 id="sm-state-machine">sm [state machine]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Creates a state machine.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template&lt;class T&gt; requires configurable&lt;T&gt;
class sm {
public:
  using states = unspecified;
  using events = unspecified;

  sm(sm &amp;&amp;) = default;
  sm(const sm &amp;) = delete;
  sm &amp;operator=(const sm &amp;) = delete;

  template &lt;class... TDeps&gt; requires is_base_of&lt;TDeps, dependencies&gt;...
  sm(TDeps&amp;&amp;...) noexcept;

  template&lt;class TEvent&gt; // no requirements
  bool process_event(const TEvent&amp;) noexcept;

  template &lt;class TVisitor&gt; requires callable&lt;void, TVisitor&gt;
  void visit_current_states(const TVisitor &amp;) const noexcept(noexcept(visitor(state{})));

  template &lt;class TState&gt;
  bool is(const state&lt;TState&gt; &amp;) const noexcept;

  template &lt;class... TStates&gt; requires sizeof...(TStates) == number_of_initial_states
  bool is(const state&lt;TStates&gt; &amp;...) const noexcept;
};
</code></pre>
<table>
<thead>
<tr>
<th>Expression</th>
<th>Requirement</th>
<th>Description</th>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>process_event&lt;TEvent&gt;</code></td>
<td>-</td>
<td>process event <code>TEvent</code></td>
<td>returns true when handled, false otherwise</td>
</tr>
<tr>
<td><code>visit_current_states&lt;TVisitor&gt;</code></td>
<td>callable</td>
<td>visit current states</td>
<td>-</td>
</tr>
<tr>
<td><code>is&lt;TState&gt;</code></td>
<td>-</td>
<td>verify whether any of current states equals <code>TState</code></td>
<td>true when any current state matches <code>TState</code>, false otherwise</td>
</tr>
<tr>
<td><code>is&lt;TStates...&gt;</code></td>
<td>size of TStates... equals number of initial states</td>
<td>verify whether all current states match <code>TStates...</code></td>
<td>true when all states match <code>TState...</code>, false otherwise</td>
</tr>
</tbody>
</table>
<p><strong><em>Semantics</em></strong></p>
<pre><code>sm&lt;T&gt;{...};
sm.process_event(TEvent{});
sm.visit_current_states([](auto state){});
sm.is(terminate);
sm.is(s1, s2);
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>struct my_event {};

class example {
public:
  auto configure() const noexcept {
  using namespace msm;
    return make_transition_table(
      "idle"_s(initial) == terminate + event&lt;my_event&gt; / [](int i) { std::cout &lt;&lt; i &lt;&lt; std::endl; }
    );
  }
};

sm&lt;example&gt; sm{42};
assert(sm.is("idle"_s));
assert(!sm.process_event(int{})); // no handled
assert(sm.process_event(my_event{})); // handled
assert(sm.is(terminate));

sm.visit_current_states([](auto state) { std::cout &lt;&lt; state.c_str() &lt;&lt; std::endl; });
</code></pre>
<h3 id="testingsm-testing">testing::sm [testing]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Creates a state machine with testing capabilities.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>namespace testing {
  template &lt;class T&gt;
  class sm : public msm::sm&lt;T&gt; {
   public:
    using msm::sm&lt;T&gt;::sm;

    template &lt;class... TStates&gt;
    void set_current_states(const detail::state&lt;TStates&gt; &amp;...) noexcept;
  };
}
</code></pre>
<table>
<thead>
<tr>
<th>Expression</th>
<th>Requirement</th>
<th>Description</th>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>set_current_states&lt;TStates...&gt;</code></td>
<td>-</td>
<td>set current states</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong><em>Semantics</em></strong></p>
<pre><code>testing::sm&lt;T&gt;{...};
sm.set_current_states("s1"_s);
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>testing::sm&lt;T&gt;{inject_fake_data...};
sm.set_current_states("s1"_s);
sm.process_event(TEvent{});
sm.is(terminate);
</code></pre>
<h3 id="make_dispatch_table-extension">make_dispatch_table [extension]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Creates a dispatch table to handle runtime events.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>template&lt;class TEvent, int EventRangeBegin, int EventRangeBegin, class SM&gt; requires dispatchable&lt;TEvent, typename SM::events&gt;
callable&lt;bool, (TEvent, int)&gt; make_dispatch_table(sm&lt;SM&gt;&amp;) noexcept;
</code></pre>
<p><strong><em>Semantics</em></strong></p>
<pre><code>make_dispatch_table&lt;T, 0, 10&gt;(sm);
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>struct runtime_event {
  int id = 0;
};
struct event1 {
  static constexpr auto id = 1;
  event1(const runtime_event &amp;) {}
};

auto dispatch_event = msm::make_dispatch_table&lt;runtime_event, 1 /*min*/, 5 /*max*/&gt;(sm);
assert(dispatch_event(event, event.id));
</code></pre>
<h3 id="boost_msm_log-debugging">BOOST_MSM_LOG [debugging]</h3>
<p><strong><em>Header</em></strong></p>
<pre><code>#include &lt;boost/msm.hpp&gt;
</code></pre>
<p><strong><em>Description</em></strong></p>
<p>Add logging support for the state machine.</p>
<p><strong><em>Synopsis</em></strong></p>
<pre><code>#define BOOST_MSM_LOG(T, SM, ...)
</code></pre>
<table>
<thead>
<tr>
<th>Expression</th>
<th>Requirement</th>
<th>Description</th>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>T</code></td>
<td>-</td>
<td>process_event/guard/action/state_change</td>
<td>Enables logging of state machine behaviour</td>
</tr>
</tbody>
</table>
<p><strong><em>Semantics</em></strong></p>
<pre><code>BOOST_MSM_LOG(state_change, sm&lt;example&gt;, current_state, new_state)
</code></pre>
<p><strong><em>Example</em></strong></p>
<pre><code>template &lt;class SM, class TEvent&gt;
void log_process_event(const TEvent&amp;) {
  printf("[%s][process_event] %s\n", typeid(SM).name(), typeid(TEvent).name());
}

template &lt;class SM, class TAction, class TEvent&gt;
void log_guard(const TAction&amp;, const TEvent&amp;, bool result) {
  printf("[%s][guard] %s %s %s\n", typeid(SM).name(), typeid(TAction).name(), typeid(TEvent).name(),
         (result ? "[OK]" : "[Reject]"));
}

template &lt;class SM, class TAction, class TEvent&gt;
void log_action(const TAction&amp;, const TEvent&amp;) {
  printf("[%s][action] %s %s\n", typeid(SM).name(), typeid(TAction).name(), typeid(TEvent).name());
}

template &lt;class SM, class TSrcState, class TDstState&gt;
void log_state_change(const TSrcState&amp; src, const TDstState&amp; dst) {
  printf("[%s][transition] %s -&gt; %s\n", typeid(SM).name(), src.c_str(), dst.c_str());
}

#define BOOST_MSM_LOG(T, SM, ...) log_##T&lt;SM&gt;(__VA_ARGS__)
#include "boost/msm.hpp"
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../examples/index.html" class="btn btn-neutral float-right" title="Examples">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../tutorial/index.html" class="btn btn-neutral" title="Tutorial"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div id="disqus_thread"></div>
  <script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = 'msm-lite';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2016</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../tutorial/index.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../examples/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
